{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "description": "Autocannon HTTP benchmarking configuration",

  "defaults": {
    "connections": 100,
    "duration": 30,
    "pipelining": 1,
    "timeout": 10,
    "bailout": 1000,
    "method": "GET",
    "headers": {
      "Content-Type": "application/json"
    }
  },

  "scenarios": {
    "light-load": {
      "description": "Light load test for smoke testing",
      "connections": 10,
      "duration": 10,
      "pipelining": 1
    },

    "moderate-load": {
      "description": "Moderate load similar to production traffic",
      "connections": 50,
      "duration": 30,
      "pipelining": 5
    },

    "heavy-load": {
      "description": "Heavy load stress test",
      "connections": 200,
      "duration": 60,
      "pipelining": 10
    },

    "spike-test": {
      "description": "Sudden spike in traffic",
      "connections": 500,
      "duration": 10,
      "pipelining": 1
    },

    "sustained-load": {
      "description": "Long-running sustained load",
      "connections": 100,
      "duration": 300,
      "pipelining": 10
    }
  },

  "endpoints": {
    "health-check": {
      "url": "http://localhost:3000/health",
      "method": "GET",
      "connections": 10,
      "duration": 5
    },

    "api-read": {
      "url": "http://localhost:3000/api/users",
      "method": "GET",
      "connections": 100,
      "duration": 30,
      "headers": {
        "Authorization": "Bearer ${API_TOKEN}"
      }
    },

    "api-write": {
      "url": "http://localhost:3000/api/users",
      "method": "POST",
      "connections": 50,
      "duration": 30,
      "headers": {
        "Content-Type": "application/json"
      },
      "body": {
        "name": "Test User",
        "email": "test@example.com"
      }
    },

    "database-query": {
      "url": "http://localhost:3000/api/search?q=test",
      "method": "GET",
      "connections": 100,
      "duration": 30
    }
  },

  "performance-budgets": {
    "api-response-time": {
      "p50": 50,
      "p95": 200,
      "p99": 500
    },
    "throughput": {
      "min": 1000
    },
    "error-rate": {
      "max": 0.01
    }
  },

  "reporting": {
    "format": "json",
    "output": "reports/benchmark-results.json",
    "compare-baseline": true,
    "baseline-file": "baseline/benchmark-baseline.json",
    "fail-on-regression": true,
    "regression-threshold": 0.1
  }
}
